(()=>{"use strict";const e=(e,t,a,l)=>{const o=document.getElementById(e),n=o.querySelectorAll(t),c=l;let r=document.documentElement.clientWidth,s=0;const i=e=>{l=e<576?0:c,d(s)};if(window.addEventListener("resize",(()=>{r=document.documentElement.clientWidth,i(r)})),!o||!n)return;const d=e=>{n.forEach(((t,a)=>{a>e+l||a<e?t.classList.add("item__display"):(t.classList.remove("item__display"),l||(t.style.maxWidth=r+"px"))}))};o.addEventListener("click",(e=>{e.preventDefault(),e.target.closest(a)&&(e.target.closest(a+"--right")?s+=l+1:e.target.closest(a+"--left")&&(s-=l+1),s>=n.length&&(s=l?0:l+1),s<0&&(s=l?n.length-(l+1):n.length-1),d(s))})),i(r)},t=(e,t)=>{const a=document.querySelectorAll(e),l=document.querySelector("."+t),o=document.querySelector(".overlay"),n=(e,t)=>{e.classList.toggle(t)};a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n(l,t),o.style.display="block"}))})),l.addEventListener("click",(e=>{e.target.classList.contains(t+"__close")&&(n(l,t),o.style.display="none")}))};e("benefits",".benefits__item",".benefits__arrow",2),e("services",".col-md-12",".services__arrow",1),t(".service-button","services-modal"),t(".button","header-modal"),(e=>{const t=document.querySelectorAll(".count");let a=setInterval((()=>{let l=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60%24),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60),timeRemaining:t}})();l.timeRemaining>0?t.forEach(((e,t)=>{var a;e.querySelector("span").textContent=(a=0===t||4===t?l.days:1===t||5===t?l.hours:2===t||6===t?l.minutes:l.seconds)<10?"0"+a:a})):(clearInterval(a),t.forEach((e=>{e.querySelector("span").textContent="00"})))}),1e3)})("26 january 2022"),(()=>{const e=document.querySelectorAll(".form-horizontal"),t=document.createElement("div");e.forEach((e=>{const a=e.querySelectorAll("input"),l=e.querySelector("button");a.forEach((e=>{e.addEventListener("input",(t=>{e.classList.remove("error"),(e=>{switch(e.target.name){case"fio":e.target.value=e.target.value.replace(/[^а-яА-Яa-zA-Z ]/g,"");break;case"phone":e.target.value=e.target.value.replace(/[^\+0-9]/,"")}})(t)}))})),l.addEventListener("click",(l=>{l.preventDefault(),((e,a,l)=>{let o={};var n;new FormData(a).forEach(((e,t)=>{o[t]=e})),o.calcTotal=localStorage.calcTotal,console.log(o),(e=>{let t=!0;return e.forEach((e=>{let a,l="";switch(l=e.value.trim(),e.name){case"phone":a=/^[\+\d()]/g,(!a.test(e.value)||l.length>17)&&(e.classList.add("error"),t=!1);break;case"fio":a=/^[а-яА-Яa-zA-Z ]/g,(!a.test(e.value)||l.length<2)&&(e.classList.add("error"),t=!1)}})),t})(e)&&(n=o,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((e=>{l.forEach((e=>{"hidden"!=e.type&&(e.value="")})),t.textContent="заявка отправлена",a.querySelector(".order-form-button").before(t),setTimeout((()=>{t.textContent=""}),5e3)})).catch((e=>{console.log("Ошибка")}))})(a,e,a)}))}))})(),(()=>{const e=document.querySelector("body"),t=(e,t,a)=>{const l=document.getElementById("calc-total");if("--"===e.value||"--"===t.value||""===a.value)return l.value="",localStorage.calcTotal="",!1;l.value=(e.value*t.value*a.value).toFixed(1),localStorage.calcTotal=l.value};if(e.classList.contains("balkony")){const e=document.getElementById("calc-type"),a=document.getElementById("calc-type-material"),l=document.getElementById("calc-input");e.addEventListener("change",(()=>{t(e,a,l)})),a.addEventListener("change",(()=>{t(e,a,l)})),l.addEventListener("input",(()=>{l.value=l.value.replace(/[^0-9]/g,""),t(e,a,l)}))}})()})();